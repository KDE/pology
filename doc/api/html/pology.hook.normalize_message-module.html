<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pology.hook.normalize_message</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pology-module.html">Package&nbsp;pology</a> ::
        <a href="pology.hook-module.html">Package&nbsp;hook</a> ::
        Module&nbsp;normalize_message
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module normalize_message</h1><p class="nomargin-top"></p>
<p>Various normalizations of messages.</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Chusslove Illich (&#1063;&#1072;&#1089;&#1083;&#1072;&#1074; &#1048;&#1083;&#1080;&#1115;) &lt;caslav.ilic@gmx.net&gt;
      </p>
      <p><strong>License:</strong>
        GPLv3
      </p>
</div><!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code>(cat, msg) -&gt; numerr</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.hook.normalize_message-module.html#demangle_srcrefs" class="summary-sig-name">demangle_srcrefs</a>(<span class="summary-sig-arg">collsrcs</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">collsrcmap</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">truesrcheads</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">compexts</span>=<span class="summary-sig-default">None</span>)</span><br />
      Resolve source references created by intermediate extraction [hook 
      factory].</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.hook.normalize_message-module.html#uniq_source" class="summary-sig-name">uniq_source</a>(<span class="summary-sig-arg">msg</span>,
        <span class="summary-sig-arg">cat</span>)</span><br />
      Make source references unique [type F4A hook].</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code>(cat, msg) -&gt; numerr</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.hook.normalize_message-module.html#uniq_auto_comment" class="summary-sig-name">uniq_auto_comment</a>(<span class="summary-sig-arg">onlyheads</span>=<span class="summary-sig-default">None</span>)</span><br />
      Remove non-unique auto comment lines [hook factory].</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Variables</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'pology.hook'"><code class="variable-quote">'</code><code class="variable-string">pology.hook</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="demangle_srcrefs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">demangle_srcrefs</span>(<span class="sig-arg">collsrcs</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">collsrcmap</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">truesrcheads</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">compexts</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Resolve source references created by intermediate extraction [hook 
  factory].</p>
  <p>Sometimes the messages from a source file in the format not known to 
  <code>xgettext(1)</code> are first extracted by a preextraction tool into
  a format known to <code>xgettext</code>, and then by 
  <code>xgettext</code> to PO template. This is the intermediate 
  extraction, and the files that <code>xgettext</code> gets to operate on 
  are intermediate files.</p>
  <p>When intermediate extraction is performed, the source references in 
  the resulting PO template are going to be &quot;mangled&quot;, pointing 
  to the intermediate files rather than to the true source files. This hook
  factory will produce a function that will resolve intermediate into true 
  source reference, &quot;demangle&quot; them, where possible.</p>
  <p>One mode of intermediate extraction is to extract multiple sources 
  into a collective intermediate file. This file may have standardized name
  throughout a collection of catalogs, or it may be special by catalog. For
  demangling to be possible in this case, the preextraction tool has to 
  provide true source references in the extracted comments 
  (<code>#.</code>) of the messages. When that is the case, parameter 
  <code>collsrcs</code> is used to specify the sequence of names of 
  generally known intermediate files, parameter <code>collsrcmap</code> of 
  those specific by catalog (as dictionary of catalog name to sequence of 
  intermediate file names), and parameter <code>truesrcheads</code> 
  specifies the sequence of initial strings in extracted comments which are
  followed by the true source reference. (If <code>truesrcheads</code> is 
  <code>None</code> or empty, this mode of demangling is disabled.)</p>
  <p>For example, collective-intermediate extraction:</p>
<pre class="literalblock">
   #. file: apples.clt:156
   #: resources.cpp:328
   msgid &quot;Granny Smith&quot;
   msgstr &quot;&quot;

   #. file: peaches.clt:49
   #: resources.cpp:2672
   msgid &quot;Redhaven&quot;
   msgstr &quot;&quot;
</pre>
  <p>is demangled by setting 
  <code>collsrcs=[&quot;resources.cpp&quot;]</code> and 
  <code>truesrcheads=[&quot;file:&quot;]</code>.</p>
  <p>Another mode of intermediate extraction is to for each source file to 
  be extracted into a single paired intermediate file, which is named same 
  as the true source plus an additional extension. In this mode, parameter 
  <code>compexts</code> specifies the list of known composite extensions 
  (including the leading dot), which will be demangled by stripping the 
  final extension from the path.</p>
  <p>For example, paired-intermediate extraction:</p>
<pre class="literalblock">
   #: apples.clt.h:156
   msgid &quot;Granny Smith&quot;
   msgstr &quot;&quot;

   #: peaches.clt.h:49
   msgid &quot;Redhaven&quot;
   msgstr &quot;&quot;
</pre>
  <p>is demangled by setting 
  <code>compexts=[&quot;.clt.h&quot;]</code>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>collsrcs</code></strong> (&lt;string*&gt;) - general intermediate file names</li>
        <li><strong class="pname"><code>collsrcmap</code></strong> ({string: &lt;string*&gt;*}) - catalog-specific intermediate file names</li>
        <li><strong class="pname"><code>truesrcheads</code></strong> (&lt;string*&gt;) - prefixes to true file references in comments</li>
        <li><strong class="pname"><code>compexts</code></strong> (&lt;string*&gt;) - composite intermediate file extensions</li>
    </ul></dd>
    <dt>Returns: <code>(cat, msg) -&gt; numerr</code></dt>
        <dd>type F4A hook</dd>
  </dl>
</td></tr></table>
</div>
<a name="uniq_source"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">uniq_source</span>(<span class="sig-arg">msg</span>,
        <span class="sig-arg">cat</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Make source references unique [type F4A hook].</p>
  <p>Sometimes source references of a message can be non-unique due to 
  particularities of extraction or later processing. This hook makes them 
  unique, while preserving the ordering.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="uniq_auto_comment"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">uniq_auto_comment</span>(<span class="sig-arg">onlyheads</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Remove non-unique auto comment lines [hook factory].</p>
  <p>Sometimes the message extraction tool adds automatic comments to 
  provide more context for the message (for example, XML tag path to the 
  current message). If the message is found more than once in the same 
  context, such comment lines get repeated. This hook can be used to make 
  auto comment lines unique; either fully, or only those with certain 
  prefixes given by <code>onlyheads</code> parameter.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>onlyheads</code></strong> (&lt;string*&gt;) - prefixes of comment lines which should be made unique</li>
    </ul></dd>
    <dt>Returns: <code>(cat, msg) -&gt; numerr</code></dt>
        <dd>type F4A hook</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
