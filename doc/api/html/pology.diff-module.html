<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pology.diff</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pology-module.html">Package&nbsp;pology</a> ::
        Module&nbsp;diff
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module diff</h1><p class="nomargin-top"></p>
<p>Produce special diffs between strings and other interesting 
  objects.</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Chusslove Illich (&#1063;&#1072;&#1089;&#1083;&#1072;&#1074; &#1048;&#1083;&#1080;&#1115;) &lt;caslav.ilic@gmx.net&gt;
      </p>
      <p><strong>License:</strong>
        GPLv3
      </p>
</div><!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[(string, element)...] or ([(string, element)...], float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#tdiff" class="summary-sig-name">tdiff</a>(<span class="summary-sig-arg">seq_old</span>,
        <span class="summary-sig-arg">seq_new</span>,
        <span class="summary-sig-arg">reductf</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create tagged difference of two sequences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[(string, element)...] or ([(string, element)...], float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#itdiff" class="summary-sig-name">itdiff</a>(<span class="summary-sig-arg">seq_old</span>,
        <span class="summary-sig-arg">seq_new</span>,
        <span class="summary-sig-arg">reductf</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">cutoff</span>=<span class="summary-sig-default">0.6</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create interleaved tagged difference of two sequences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[(string, string)...] or ([(string, string)...], float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#word_diff" class="summary-sig-name">word_diff</a>(<span class="summary-sig-arg">text_old</span>,
        <span class="summary-sig-arg">text_new</span>,
        <span class="summary-sig-arg">markup</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create word-level difference between old and new text.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string/ColorString/None or (string/ColorString/None, float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#word_ediff" class="summary-sig-name">word_ediff</a>(<span class="summary-sig-arg">text_old</span>,
        <span class="summary-sig-arg">text_new</span>,
        <span class="summary-sig-arg">markup</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">colorize</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create word-level embedded difference between old and new texts.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string or None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#word_ediff_to_old" class="summary-sig-name">word_ediff_to_old</a>(<span class="summary-sig-arg">dtext</span>)</span><br />
      Recover old version (-) from text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string or None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#word_ediff_to_new" class="summary-sig-name">word_ediff_to_new</a>(<span class="summary-sig-arg">dtext</span>)</span><br />
      Recover new version (+) from text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string or list or None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#word_ediff_to_rem" class="summary-sig-name">word_ediff_to_rem</a>(<span class="summary-sig-arg">dtext</span>,
        <span class="summary-sig-arg">sep</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"> </code><code class="variable-quote">'</code></span>)</span><br />
      Recover removed segments (-) from text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string or list or None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#word_ediff_to_add" class="summary-sig-name">word_ediff_to_add</a>(<span class="summary-sig-arg">dtext</span>,
        <span class="summary-sig-arg">sep</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"> </code><code class="variable-quote">'</code></span>)</span><br />
      Recover added segments (+) from text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[[(string, string)...]...] or ([([(string, string)...], float)...], 
      float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#line_diff" class="summary-sig-name">line_diff</a>(<span class="summary-sig-arg">lines_old</span>,
        <span class="summary-sig-arg">lines_new</span>,
        <span class="summary-sig-arg">markup</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create word-level difference between old and new lines of text.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[string...] or ([(string, float)...], float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#line_ediff" class="summary-sig-name">line_ediff</a>(<span class="summary-sig-arg">lines_old</span>,
        <span class="summary-sig-arg">lines_new</span>,
        <span class="summary-sig-arg">markup</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">colorize</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create word-level embedded difference between old and new lines of 
      text.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of strings</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#line_ediff_to_old" class="summary-sig-name">line_ediff_to_old</a>(<span class="summary-sig-arg">dlines</span>)</span><br />
      Recover old version (-) from lines of text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of strings</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#line_ediff_to_new" class="summary-sig-name">line_ediff_to_new</a>(<span class="summary-sig-arg">dlines</span>)</span><br />
      Recover new version (+) from lines of text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of index tuples</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#adapt_spans" class="summary-sig-name">adapt_spans</a>(<span class="summary-sig-arg">otext</span>,
        <span class="summary-sig-arg">ftext</span>,
        <span class="summary-sig-arg">spans</span>,
        <span class="summary-sig-arg">merge</span>=<span class="summary-sig-default">True</span>)</span><br />
      Adapt matched spans in filtered text to original text.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[(string, int/None, [(string, string)...])...] or ([(string, 
      int/None, [(string, string)...], float)...], float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#msg_diff" class="summary-sig-name">msg_diff</a>(<span class="summary-sig-arg">msg1</span>,
        <span class="summary-sig-arg">msg2</span>,
        <span class="summary-sig-arg">pfilter</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">addrem</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create word-level difference between extraction-invariant parts of 
      messages.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">type(emsg or msg2 or msg1 or None) or (type(~), float)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#msg_ediff" class="summary-sig-name">msg_ediff</a>(<span class="summary-sig-arg">msg1</span>,
        <span class="summary-sig-arg">msg2</span>,
        <span class="summary-sig-arg">pfilter</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">addrem</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">emsg</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">ecat</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">eokpos</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">enoctxt</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">emptydc</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">colorize</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">diffr</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create word-level embedded difference between extraction-invariant 
      parts of messages.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">type of first non-None of rmsg, emsg, or None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#msg_ediff_to_new" class="summary-sig-name">msg_ediff_to_new</a>(<span class="summary-sig-arg">emsg</span>,
        <span class="summary-sig-arg">rmsg</span>=<span class="summary-sig-default">None</span>)</span><br />
      Resolve message with embedded difference to the newer message.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#msg_ediff_to_old" class="summary-sig-name">msg_ediff_to_old</a>(<span class="summary-sig-arg">emsg</span>,
        <span class="summary-sig-arg">rmsg</span>=<span class="summary-sig-default">None</span>)</span><br />
      Resolve message with embedded difference to the older message.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">float</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#editprob" class="summary-sig-name">editprob</a>(<span class="summary-sig-arg">oldtext</span>,
        <span class="summary-sig-arg">newtext</span>)</span><br />
      Compute the probability that a human would rather edit the old text 
      to obtain the new text, then write it from scratch.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">float or <code>None</code></span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.diff-module.html#descprob" class="summary-sig-name">descprob</a>(<span class="summary-sig-arg">descpath</span>,
        <span class="summary-sig-arg">ancpath</span>,
        <span class="summary-sig-arg">cutoff</span>=<span class="summary-sig-default">None</span>)</span><br />
      Compute the probability that one PO file is a descendant of another.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Variables</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'pology'"><code class="variable-quote">'</code><code class="variable-string">pology</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="x"></a><span class="summary-name">x</span> = <code title="'msgid_plural'"><code class="variable-quote">'</code><code class="variable-string">msgid_plural</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="tdiff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">tdiff</span>(<span class="sig-arg">seq_old</span>,
        <span class="sig-arg">seq_new</span>,
        <span class="sig-arg">reductf</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create tagged difference of two sequences.</p>
  <p>Difference is presented as a list of tuples, with each tuple composed 
  of a difference tag and a sequence element. Difference tag is string 
  <code>&quot;+&quot;</code>, <code>&quot;-&quot;</code>, or <code>&quot; 
  &quot;</code>, for elements which belong to the old, the new, or to both 
  sequences, respectively.</p>
  <p>The list is ordered such that collecting all elements not tagged as 
  old will reconstruct the new sequence, and collecting all not tagged as 
  new will reconstruct the old sequence.</p>
  <p>If requested by the <code>diffr</code> parameter, also reported is the
  <i>difference ratio</i>, a heuristic measure of difference between two 
  texts. 0.0 means no difference, and 1.0 that sequences are completely 
  different.</p>
  <p>Examples:</p>
<pre class="literalblock">
   &gt;&gt;&gt; s1 = &quot;A type of foo&quot;.split()
   &gt;&gt;&gt; s2 = &quot;A kind of foo&quot;.split()
   &gt;&gt;&gt; tdiff(s1, s2)
   [(' ', 'A'), ('-', 'type'), ('+', 'kind'), (' ', 'of'), (' ', 'foo')]
   &gt;&gt;&gt; word_diff(s1, s2, diffr=True)
   ([(' ', 'A'), ('-', 'type'), ('+', 'kind'), (' ', 'of'), (' ', 'foo')],
   0.25)
</pre>
  <p>To be able to diff them, sequence elements only need to be hashable. 
  However, for compound elements it may be better to diff them only by some
  subset of data, e.g. by one of their string attributes. Parameter 
  <code>reductf</code> can be used to specify a reduction function, which 
  will be called on each element to produce its diffing representative.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>seq_old</code></strong> (sequence with hashable elements) - sequence to diff from</li>
        <li><strong class="pname"><code>seq_new</code></strong> (sequence with hashable elements) - sequence to diff to</li>
        <li><strong class="pname"><code>reductf</code></strong> ((sequence element) -&gt; diffing representative) - function to produce diffing representatives</li>
        <li><strong class="pname"><code>diffr</code></strong> (bool) - whether to report difference ratio</li>
    </ul></dd>
    <dt>Returns: [(string, element)...] or ([(string, element)...], float)</dt>
        <dd>difference list and possibly difference ratio</dd>
  </dl>
</td></tr></table>
</div>
<a name="itdiff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">itdiff</span>(<span class="sig-arg">seq_old</span>,
        <span class="sig-arg">seq_new</span>,
        <span class="sig-arg">reductf</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">cutoff</span>=<span class="sig-default">0.6</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create interleaved tagged difference of two sequences.</p>
  <p>Similar to <a href="pology.diff-module.html#tdiff" 
  class="link">tdiff</a>, except that blocks of added/removed elements are 
  further heuristically interleaved by similarity, such that each removed 
  element may be followed by a similar added element, if such has been 
  determined. This is useful e.g. to be able to afterwards make inner 
  difference of each two paired similar elements (e.g. word diff within 
  line diff).</p>
  <p>Example:</p>
<pre class="literalblock">
   &gt;&gt;&gt; s1 = &quot;Two blue airplanes&quot;.split()
   &gt;&gt;&gt; s2 = &quot;Two bluish ships&quot;.split()
   &gt;&gt;&gt; D.tdiff(s1, s2)
   [(' ', 'Two'), ('-', 'blue'), ('-', 'airplanes'), ('+', 'bluish'),
    ('+', 'ships')]
   &gt;&gt;&gt; D.itdiff(s1, s2)
   [(' ', 'Two'), ('-', 'blue'), ('+', 'bluish'), ('-', 'airplanes'),
    ('+', 'ships')]
</pre>
  <p>To be able to interleave blocks, each element in turn must be a 
  sequence in its own. This means that function supplied by 
  <code>reductf</code>, otherwise of same semantics as in <a 
  href="pology.diff-module.html#tdiff" class="link">tdiff</a>, here must 
  also produce a sequence as diffing representative (e.g. a string).</p>
  <p>Parameter <code>cutoff</code> states the minimal similarity between 
  two elements needed for them to be considered similar at all.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>seq_old</code></strong> (sequence with hashable elements) - sequence to diff from</li>
        <li><strong class="pname"><code>seq_new</code></strong> (sequence with hashable elements) - sequence to diff to</li>
        <li><strong class="pname"><code>reductf</code></strong> ((sequence element) -&gt; representative sequence) - function to produce diffing representatives</li>
        <li><strong class="pname"><code>cutoff</code></strong> (float [0, 1]) - minimal similarity to consider elements similar</li>
        <li><strong class="pname"><code>diffr</code></strong> (bool) - whether to report difference ratio</li>
    </ul></dd>
    <dt>Returns: [(string, element)...] or ([(string, element)...], float)</dt>
        <dd>interleaved difference list and possibly difference ratio</dd>
  </dl>
</td></tr></table>
</div>
<a name="word_diff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_diff</span>(<span class="sig-arg">text_old</span>,
        <span class="sig-arg">text_new</span>,
        <span class="sig-arg">markup</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">format</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level difference between old and new text.</p>
  <p>The difference is computed by looking at texts as collections of words
  and intersegments. Difference is presented as a list of tuples, with each
  tuple composed of a difference tag and a text segment. Difference tag is 
  string <code>&quot;+&quot;</code>, <code>&quot;-&quot;</code>, or 
  <code>&quot; &quot;</code>, for text segments which are new, old, or 
  present in both texts, respectively. If one of the texts is 
  <code>None</code>, as opposed to empty string, a tilde is appended to the
  base difference tag.</p>
  <p>The list is ordered such that joining all text segments not marked as 
  old will reconstruct the new text, and joining all not marked as new will
  reconstruct the old text.</p>
  <p>If requested by the <code>diffr</code> parameter, also reported is the
  <i>difference ratio</i>, a heuristic measure of difference between two 
  texts. 0.0 means no difference, and 1.0 that the texts are completely 
  different.</p>
  <p>Differencing may take into account when the texts are expected to have
  XML-like markup, or when they are of certain format defined by 
  Gettext.</p>
  <p>Examples:</p>
<pre class="literalblock">
   &gt;&gt;&gt; s1 = &quot;A new type of foo.&quot;
   &gt;&gt;&gt; s2 = &quot;A new kind of foo.&quot;
   &gt;&gt;&gt; word_diff(s1, s2)
   [(' ', 'A new '), ('+', 'kind'), ('-', 'type'), (' ', ' of foo.')]
   &gt;&gt;&gt; word_diff(s1, s2, diffr=True)
   ([(' ', 'A new '), ('+', 'kind'), ('-', 'type'), (' ', ' of foo.')],
   0.36363636363636365)
   &gt;&gt;&gt; word_diff(s1, None, diffr=True)
   ([('-~', 'A new type of foo.')], 1.0)
   &gt;&gt;&gt; word_diff(None, s2, diffr=True)
   ([('+~', 'A new kind of foo.')], 1.0)
</pre>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>text_old</code></strong> (string or None) - the old text</li>
        <li><strong class="pname"><code>text_new</code></strong> (string or None) - the new text</li>
        <li><strong class="pname"><code>markup</code></strong> (bool) - whether <code>&lt;...&gt;</code> markup can be expected in the 
          texts</li>
        <li><strong class="pname"><code>format</code></strong> (string) - Gettext format flag (e.g. <code>&quot;c-format&quot;</code>, 
          etc.)</li>
        <li><strong class="pname"><code>diffr</code></strong> (bool) - whether to report difference ratio</li>
    </ul></dd>
    <dt>Returns: [(string, string)...] or ([(string, string)...], float)</dt>
        <dd>difference list and possibly difference ratio</dd>
  </dl>
</td></tr></table>
</div>
<a name="word_ediff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_ediff</span>(<span class="sig-arg">text_old</span>,
        <span class="sig-arg">text_new</span>,
        <span class="sig-arg">markup</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">format</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">colorize</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level embedded difference between old and new texts.</p>
  <p>Same as <a href="pology.diff-module.html#word_diff" 
  class="link">word_diff</a>, but the difference is returned as text in 
  which the new segments are wrapped as <code>{+...+}</code>, and the old 
  segments as <code>{-...-}</code>. If a difference wrapper is already 
  contained in the text, it will be escaped by inserting a tilde, e.g. 
  <code>&quot;{+...+}&quot;</code> -&gt; 
  <code>&quot;{~+...+~}&quot;</code>. If even an escaped wrapper is 
  contained in the text, another tilde is inserted, and so on.</p>
  <p>If one of the texts is <code>None</code>, then the whole other text is
  wrapped as suitable difference, and a tilde added to its end to indicate 
  that the other text was <code>None</code>. If neither of the texts is 
  <code>None</code>, but after differencing the tilde appears in the end of
  embedded difference, it is escaped by another tilde. If both texts are 
  <code>None</code>, <code>None</code> is returned as the difference.</p>
  <p>The <code>colorize</code> parameter can be used to additionally 
  highlight embedded difference by using color markup provided by <a 
  href="pology.colors.ColorString-class.html" class="link">ColorString</a>.
  If colorizing is enabled, the return value is a 
  <code>ColorString</code>.</p>
  <p>See <a href="pology.diff-module.html#word_diff" 
  class="link">word_diff</a> for description of other parameters.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>colorize</code></strong> (bool) - whether to colorize differences</li>
    </ul></dd>
    <dt>Returns: string/ColorString/None or (string/ColorString/None, float)</dt>
        <dd>string with embedded differences and possibly difference ratio</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#word_diff" 
        class="link">word_diff</a>
      </p>
</div></td></tr></table>
</div>
<a name="word_ediff_to_old"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_ediff_to_old</span>(<span class="sig-arg">dtext</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover old version (-) from text with embedded differences.</p>
  <p>In case there was no old text, <code>None</code> is returned.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dtext</code></strong> (string) - text with embedded differences</li>
    </ul></dd>
    <dt>Returns: string or None</dt>
        <dd>old version of the text</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#word_ediff" 
        class="link">word_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="word_ediff_to_new"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_ediff_to_new</span>(<span class="sig-arg">dtext</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover new version (+) from text with embedded differences.</p>
  <p>In case there was no new text, <code>None</code> is returned.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dtext</code></strong> (string) - text with embedded differences</li>
    </ul></dd>
    <dt>Returns: string or None</dt>
        <dd>new version of the text</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#word_ediff" 
        class="link">word_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="word_ediff_to_rem"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_ediff_to_rem</span>(<span class="sig-arg">dtext</span>,
        <span class="sig-arg">sep</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string"> </code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover removed segments (-) from text with embedded differences.</p>
  <p>If separator is not <code>None</code>, the joined string of selected 
  segments is returned. Otherwise, the list of selected segments is 
  returned. In either case, if there was no old text, <code>None</code> is 
  returned.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dtext</code></strong> (string) - text with embedded differences</li>
        <li><strong class="pname"><code>sep</code></strong> (string or None) - separator with which to join selected segments</li>
    </ul></dd>
    <dt>Returns: string or list or None</dt>
        <dd>text with only the removed segments</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#word_ediff" 
        class="link">word_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="word_ediff_to_add"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_ediff_to_add</span>(<span class="sig-arg">dtext</span>,
        <span class="sig-arg">sep</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string"> </code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover added segments (+) from text with embedded differences.</p>
  <p>If separator is not <code>None</code>, the joined string of selected 
  segments is returned. Otherwise, the list of selected segments is 
  returned. In either case, if there was no new text, <code>None</code> is 
  returned.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dtext</code></strong> (string) - text with embedded differences</li>
        <li><strong class="pname"><code>sep</code></strong> (string or None) - separator with which to join selected segments</li>
    </ul></dd>
    <dt>Returns: string or list or None</dt>
        <dd>text with only the added segments</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#word_ediff" 
        class="link">word_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="line_diff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">line_diff</span>(<span class="sig-arg">lines_old</span>,
        <span class="sig-arg">lines_new</span>,
        <span class="sig-arg">markup</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">format</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level difference between old and new lines of text.</p>
  <p>First makes a difference on a line-level, and then for each set of 
  differing lines a difference on word-level, using <a 
  href="pology.diff-module.html#word_diff" class="link">word_diff</a>. 
  Difference is presented as a list of tuples of word diffs and ratios as 
  constructed by <a href="pology.diff-module.html#word_diff" 
  class="link">word_diff</a>. See <a 
  href="pology.diff-module.html#word_diff" class="link">word_diff</a> for 
  description of keyword parameters. The difference ratio is computed as 
  line-length weighted average of word difference ratios per line.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>lines_old</code></strong> (string) - old lines of text</li>
        <li><strong class="pname"><code>lines_new</code></strong> (string) - new lines of text</li>
    </ul></dd>
    <dt>Returns: [[(string, string)...]...] or ([([(string, string)...], float)...], 
      float)</dt>
        <dd>difference list and possibly difference ratios</dd>
  </dl>
</td></tr></table>
</div>
<a name="line_ediff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">line_ediff</span>(<span class="sig-arg">lines_old</span>,
        <span class="sig-arg">lines_new</span>,
        <span class="sig-arg">markup</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">format</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">colorize</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level embedded difference between old and new lines of 
  text.</p>
  <p>Same as <a href="pology.diff-module.html#line_diff" 
  class="link">line_diff</a>, but the difference is returned as list of 
  tuples of line of text (in which the new segments are wrapped as 
  <code>{+...+}</code>, and the old segments as <code>{-...-}</code>) and 
  difference ratio for the line. See <a 
  href="pology.diff-module.html#word_diff" class="link">word_diff</a> and 
  <a href="pology.diff-module.html#word_ediff" class="link">word_ediff</a> 
  for description of keyword parameters.</p>
  <dl class="fields">
    <dt>Returns: [string...] or ([(string, float)...], float)</dt>
        <dd>lines with embedded differences and possibly difference ratios</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#line_diff" 
        class="link">line_diff</a>
      </p>
</div></td></tr></table>
</div>
<a name="line_ediff_to_old"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">line_ediff_to_old</span>(<span class="sig-arg">dlines</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover old version (-) from lines of text with embedded 
  differences.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dlines</code></strong> (list of strings) - lines of text with embedded differences</li>
    </ul></dd>
    <dt>Returns: list of strings</dt>
        <dd>old version of the lines</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#line_ediff" 
        class="link">line_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="line_ediff_to_new"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">line_ediff_to_new</span>(<span class="sig-arg">dlines</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover new version (+) from lines of text with embedded 
  differences.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dlines</code></strong> (list of strings) - lines of text with embedded differences</li>
    </ul></dd>
    <dt>Returns: list of strings</dt>
        <dd>new version of the lines</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.diff-module.html#line_ediff" 
        class="link">line_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="adapt_spans"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">adapt_spans</span>(<span class="sig-arg">otext</span>,
        <span class="sig-arg">ftext</span>,
        <span class="sig-arg">spans</span>,
        <span class="sig-arg">merge</span>=<span class="sig-default">True</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Adapt matched spans in filtered text to original text.</p>
  <p>Sometimes text gets filtered before being matched, and when a match is
  found in the filtered text, it needs to be reported relative to the 
  original text. This function will heuristically adapt matched spans 
  relative to the filtered text back to the original text.</p>
  <p>Spans are given as list of index tuples <code>[(start1, end1), 
  ...]</code> where start and end index have standard Python semantics (may
  be negative too). If <code>merge</code> is <code>True</code>, any spans 
  that overlap or abut after adaptation will be merged into a single span, 
  ordered by increasing start index, and empty spans removed; otherwise 
  each adapted span will strictly correspond to the input span at that 
  position.</p>
  <p>Span tuples may have more elements past the start and end indices. 
  They will be ignored, but preserved; if merging is in effect, extra 
  elements will be preserved for only the frontmost of the overlapping 
  spans (undefined for which if there are several).</p>
  <p>If an input span is invalid in any way, it is carried over verbatim 
  into result.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>otext</code></strong> (string) - original text</li>
        <li><strong class="pname"><code>ftext</code></strong> (string) - filtered text</li>
        <li><strong class="pname"><code>spans</code></strong> (list of index tuples) - matched spans</li>
        <li><strong class="pname"><code>merge</code></strong> (bool) - whether to merge overlapping spans</li>
    </ul></dd>
    <dt>Returns: list of index tuples</dt>
        <dd>adapted spans</dd>
  </dl>
</td></tr></table>
</div>
<a name="msg_diff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">msg_diff</span>(<span class="sig-arg">msg1</span>,
        <span class="sig-arg">msg2</span>,
        <span class="sig-arg">pfilter</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">addrem</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level difference between extraction-invariant parts of 
  messages.</p>
  <p>For which parts of a message are considered extraction-invariant, see 
  description of <a href="pology.message.Message_base-class.html" 
  class="link">inv</a> instance variable of message objects.</p>
  <p>There are two return modes, depending on the value of 
  <code>diffr</code> parameter.</p>
  <p>If <code>diffr</code> is <code>False</code>, the difference is 
  returned as list of 3-tuples of differences by message part: (part name, 
  part item, word difference). The part name can be used to fetch the part 
  value from the message, using <a 
  href="pology.message.Message_base-class.html#get" class="link">get()</a> 
  method of message objects. The part item is <code>None</code> for 
  singular message parts (e.g. <code>msgid</code>), and index for list 
  parts (e.g. <code>msgstr</code>). See <a 
  href="pology.diff-module.html#word_diff" class="link">word_diff</a> for 
  the format of word-level difference.</p>
  <p>If <code>diffr</code> is <code>True</code>, then each part difference 
  has a fourth element, the difference ratio; see <a 
  href="pology.diff-module.html#word_diff" class="link">word_diff</a> for 
  its semantics. Additionally, the total difference ratio is computed, 
  based on partial ones (also counting the zero difference of parts which 
  were equal). The return value is now a 2-tuple of list of part 
  differences (as 4-tuples) and the total difference ratio.</p>
  <p>Either of the messages can be given as <code>None</code>. In case only
  one of the messages is <code>None</code>, the difference of 
  <code>msgid</code> field will show that this field does not exist in the 
  non-existant message (according to format of non-existant counterparts of
  <a href="pology.diff-module.html#word_diff" class="link">word_diff</a>). 
  If both messages are <code>None</code>, the difference is empty list, as 
  the messages are same, even if non-existant.</p>
  <p>Every <code>msgstr</code> field can be passed through a filter before 
  differencing, using the <code>pfilter</code> parameter.</p>
  <p>Instead of constructing the full difference, using the 
  <code>addrem</code> parameter only equal, added, or removed segments can 
  be reported. The value of this parameter is a string, such that the first
  character selects the type of partial difference: one of ('=', &quot;e') 
  for equal, ('+', 'a') for added, and ('-', 'r') for removed segments, and
  the rest of the string is used as separator to join the selected segments
  (if the separator is empty, space is used instead).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>msg1</code></strong> (<a href="pology.message.Message_base-class.html" 
          class="link">Message_base</a> or None) - the message from which to make the difference</li>
        <li><strong class="pname"><code>msg2</code></strong> (<a href="pology.message.Message_base-class.html" 
          class="link">Message_base</a> or None) - the message to which to make the difference</li>
        <li><strong class="pname"><code>pfilter</code></strong> (callable) - filter to be applied to translation prior to differencing</li>
        <li><strong class="pname"><code>addrem</code></strong> (string) - report equal, added or removed segments instead of full 
          difference, joined by what follows the selection character</li>
        <li><strong class="pname"><code>diffr</code></strong> (bool) - whether to report difference ratio</li>
    </ul></dd>
    <dt>Returns: [(string, int/None, [(string, string)...])...] or ([(string, 
      int/None, [(string, string)...], float)...], float)</dt>
        <dd>difference list</dd>
  </dl>
</td></tr></table>
</div>
<a name="msg_ediff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">msg_ediff</span>(<span class="sig-arg">msg1</span>,
        <span class="sig-arg">msg2</span>,
        <span class="sig-arg">pfilter</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">addrem</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">emsg</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">ecat</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">eokpos</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">enoctxt</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">emptydc</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">colorize</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">diffr</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level embedded difference between extraction-invariant 
  parts of messages.</p>
  <p>Like <a href="pology.diff-module.html#msg_diff" 
  class="link">msg_diff</a>, but instead of difference list the result is a
  message with embedded differences, of the kind produced by <a 
  href="pology.diff-module.html#word_ediff" class="link">word_ediff</a>. 
  See <a href="pology.diff-module.html#msg_diff" class="link">msg_diff</a> 
  for description <code>pfilter</code> and <code>addrem</code> parameters, 
  and <a href="pology.diff-module.html#word_ediff" 
  class="link">word_ediff</a> for the format of embedded differences. 
  Additionally, if <code>pfilter</code> is given, <code>msgstr</code> 
  fields will be diffed both with and without the filter, and if the two 
  diffs are not equal, both embeddings are going to be presented in the 
  field, suitably visually separated.</p>
  <p>By default, a new message with embedded difference will be 
  constructed, of the type of first non-None of <code>msg2</code> and 
  <code>msg1</code>. Alternatively, the difference can be embedded into the
  message supplied by <code>emsg</code> parameter.</p>
  <p>If resulting messages with embedded differences are to be inserted 
  into a catalog, that catalog can be given by the <code>ecat</code> 
  parameter. Then, if the key of the resulting message would conflict one 
  of those already in the catalog, its context will be appropriately padded
  to avoid the conflict. This is done by adding a pipe character and an 
  unspecified number of alphanumerics (generally junk-looking) to the end 
  of the <code>msgctxt</code>. In case the conflict with a particular 
  message in the catalog is acceptable (e.g. when resulting message is to 
  be inserted in its place), the position of this message can be given by 
  the <code>eokpos</code> parameter. In case a certain value of 
  <code>msgctxt</code> should be padded regardless of whether there is a 
  conflict or not, this value can be given by <code>enoctxt</code> 
  parameter.</p>
  <p>An additional automatic comment starting with <code>ediff:</code> may 
  be added to the message, possibly followed by some indicators necessary 
  to complete the difference specification. These include:</p>
  <ul>
    <li>
      <code>state &lt;STATE_DIFF&gt; ...</code>: changes in message state, 
      like <code>obsolete</code> and <code>fuzzy</code>; e.g. <code>state 
      {+obsolete+}</code> means that the message has been obsoleted from 
      <code>msg1</code> to <code>msg2</code>, while <code>state 
      {-obsolete-}</code> means that it has been was revived.
    </li>
    <li>
      <code>ctxtpad &lt;STRING&gt;</code>: padding alphanumerics added to 
      the <code>msgctxt</code> field to avoid key collision with one of the
      messages from <code>ecat</code>.
    </li>
    <li>
      <code>infsep &lt;BLOCK&gt; &lt;LENGTH&gt;</code>: if 
      <code>pfilter</code> was used, this indicator states the building 
      block and length in blocks of in-field separators.
    </li>
  </ul>
  <p>By default the difference comment is not added if there are no 
  indicators, but it may be forced by setting <code>emptydc</code> 
  parameter to <code>True</code>.</p>
  <p>Embedded differences can be additionally colorized (e.g. for terminal)
  by setting <code>colorize</code> parameter to <code>True</code>.</p>
  <p>If <code>diffr</code> is <code>True</code>, aside from the message 
  with embedded differences, the total difference ratio is returned (see <a
  href="pology.diff-module.html#msg_diff" class="link">msg_diff</a>). If 
  <code>pfilter</code> is given, the ratio refers to difference under 
  filter.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>msg1</code></strong> (<a href="pology.message.Message_base-class.html" 
          class="link">Message_base</a> or None) - the message from which to make the difference</li>
        <li><strong class="pname"><code>msg2</code></strong> (<a href="pology.message.Message_base-class.html" 
          class="link">Message_base</a> or None) - the message to which to make the difference</li>
        <li><strong class="pname"><code>pfilter</code></strong> (callable) - filter to be applied to translation prior to differencing</li>
        <li><strong class="pname"><code>addrem</code></strong> (string) - report equal, added or removed segments instead of full 
          difference, joined by what follows the selection character</li>
        <li><strong class="pname"><code>emsg</code></strong> (<a href="pology.message.Message_base-class.html" 
          class="link">Message_base</a>) - message to embedd the difference to</li>
        <li><strong class="pname"><code>ecat</code></strong> (<a href="pology.catalog.Catalog-class.html" 
          class="link">Catalog</a>) - catalog of messages to avoid key conflict with</li>
        <li><strong class="pname"><code>eokpos</code></strong> (int) - position into <code>ecat</code> where key conflict is ignored</li>
        <li><strong class="pname"><code>enoctxt</code></strong> (string) - <code>msgctxt</code> string that should be padded unconditionally</li>
        <li><strong class="pname"><code>emptydc</code></strong> (bool) - whether to add difference comment even if empty</li>
        <li><strong class="pname"><code>colorize</code></strong> (bool) - whether to colorize the difference</li>
        <li><strong class="pname"><code>diffr</code></strong> (bool) - whether to report difference ratio</li>
    </ul></dd>
    <dt>Returns: type(emsg or msg2 or msg1 or None) or (type(~), float)</dt>
        <dd>message with embedded differences (or None) and possibly 
          difference ratio</dd>
  </dl>
</td></tr></table>
</div>
<a name="msg_ediff_to_new"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">msg_ediff_to_new</span>(<span class="sig-arg">emsg</span>,
        <span class="sig-arg">rmsg</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Resolve message with embedded difference to the newer message.</p>
  <p>Message cannot be properly resolved if <code>addrem</code> parameter 
  to <a href="pology.diff-module.html#msg_ediff" class="link">msg_ediff</a>
  was used on embedding. If this function is called on such a message, the 
  result is undefined.</p>
  <p>By default a new message object is created, but using the 
  <code>rmsg</code> parameter, en existing message can be given to be 
  filled with all the resolved parts (keeping its own, ignored parts). This
  message can be the <code>emsg</code> itself.</p>
  <p>If the resolved message evaluates to no message, the function returns 
  <code>None</code>, and <code>rmsg</code> is not touched if it was 
  given.</p>
  <p>Any states indicated as added by the difference comment are ignored in
  favor of the actual states of embedded difference message. The two sets 
  should normally be equal, but if they are not, the actual state in effect
  overrides the indicated added state.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>emsg</code></strong> (<a href="pology.message.Message_base-class.html" 
          class="link">Message_base</a> or None) - resolvable message with embedded differences</li>
        <li><strong class="pname"><code>rmsg</code></strong> (<a href="pology.message.Message_base-class.html" 
          class="link">Message_base</a>) - message to fill in the resolved parts</li>
    </ul></dd>
    <dt>Returns: type of first non-None of rmsg, emsg, or None</dt>
        <dd>resolved message (or None)</dd>
  </dl>
</td></tr></table>
</div>
<a name="msg_ediff_to_old"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">msg_ediff_to_old</span>(<span class="sig-arg">emsg</span>,
        <span class="sig-arg">rmsg</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Resolve message with embedded difference to the older message.</p>
  <p>Like <a href="pology.diff-module.html#msg_ediff_to_new" 
  class="link">msg_ediff_to_new</a>, only constructing the opposite message
  (except that states indicated as removed by difference comment are never 
  ignored, i.e. they always override actual states). See <a 
  href="pology.diff-module.html#msg_ediff_to_new" 
  class="link">msg_ediff_to_new</a> for parameters and return values.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="editprob"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">editprob</span>(<span class="sig-arg">oldtext</span>,
        <span class="sig-arg">newtext</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Compute the probability that a human would rather edit the old text to
  obtain the new text, then write it from scratch.</p>
  <p>Classical algorithms to compute similarity ratio between two texts 
  sometimes produce high ratios for texts which a human would unlikely 
  consider similar enough to make one text by editing the other, and vice 
  versa. This functions uses some heuristics to derive the probability that
  one text was really edited by a human into the other.</p>
  <p>Not commutative in general.</p>
  <p>If one of the texts is given as <code>None</code>, the result is 0.0; 
  if both are <code>None</code>, the result is 1.0.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>oldtext</code></strong> (string) - candidate for initial text</li>
        <li><strong class="pname"><code>newtext</code></strong> (string) - current text</li>
    </ul></dd>
    <dt>Returns: float</dt>
        <dd>the probability of editing the old into the new text [0, 1]</dd>
  </dl>
</td></tr></table>
</div>
<a name="descprob"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">descprob</span>(<span class="sig-arg">descpath</span>,
        <span class="sig-arg">ancpath</span>,
        <span class="sig-arg">cutoff</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Compute the probability that one PO file is a descendant of 
  another.</p>
  <p>Sometimes PO files are renamed, split into two, joined into one, also 
  with possible small changes in messages between old and new set. This 
  functions uses some heuristics to derive the probability that the PO file
  given by <code>apath</code> is an ancestor of the PO file given by 
  <code>dpath</code>. If the probability cannot be determined (for whatever
  reason, e.g. if the file contains syntax errors), <code>None</code> is 
  returned.</p>
  <p>By default, only equality versus non-equality of messages is taken 
  into consideration. If <code>cutoff</code> is set to a number 0.0-1.0, 
  then fuzzy matching is performed, and partial similarities greater than 
  the cutoff are counted into the final probability. However, this reduces 
  performance by orders of magnitude (the more the lower the cutoff; 
  0.7-0.8 may be a reasonable tradeoff).</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>descpath</code></strong> (string) - path to possible descendent PO file</li>
        <li><strong class="pname"><code>ancpath</code></strong> (string) - path to possible ancestor PO file</li>
    </ul></dd>
    <dt>Returns: float or <code>None</code></dt>
        <dd>the probability of ancestry [0, 1]</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
