<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pology.sieve.find_messages</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pology-module.html">Package&nbsp;pology</a> ::
        <a href="pology.sieve-module.html">Package&nbsp;sieve</a> ::
        Module&nbsp;find_messages
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module find_messages</h1><p class="nomargin-top"></p>
<p>Find messages in catalogs.</p>
  <p>Matches patterns against elements of the message and examines its 
  properties, and reports the message if the match is complete. Matched 
  messages are reported to standard output, with the name of the file from 
  which they come, and referent line and entry number within the file.</p>
  <p>Sieve parameters for matching:</p>
  <ul>
    <li>
      <code>msgctxt:&lt;regex&gt;</code>: regular expression to match 
      against the <code>msgctxt</code>
    </li>
    <li>
      <code>msgid:&lt;regex&gt;</code>: regular expression to match against
      the <code>msgid</code>
    </li>
    <li>
      <code>msgstr:&lt;regex&gt;</code>: regular expression to match 
      against the <code>msgstr</code>
    </li>
    <li>
      <code>comment:&lt;regex&gt;</code>: regular expression to match 
      against comments
    </li>
    <li>
      <code>transl</code>: the message must be translated
    </li>
    <li>
      <code>obsol</code>: the message must be obsolete
    </li>
    <li>
      <code>flag:&lt;regex&gt;</code>: regular expression to match against 
      flags
    </li>
    <li>
      <code>plural</code>: the message must be plural
    </li>
    <li>
      <code>maxchar</code>: messages must have no more than this number of 
      characters
    </li>
    <li>
      <code>branch:&lt;branch_id&gt;</code>: match only messages from this 
      branch (summit)
    </li>
    <li>
      <code>fexpr</code>: logical expression made out of any previous 
      matching typs
    </li>
    <li>
      <code>or</code>: use OR- instead of AND-matching for text fields
    </li>
  </ul>
  <p>If more than one of the matching parameters are given (e.g. both 
  <code>msgid</code> and <code>msgstr</code>), the message matches only if 
  all of them match. Using the <code>or</code> parameter this can be 
  changed for matching in text fields (<code>msgctxt</code>, 
  <code>msgid</code>, <code>msgstr</code>, <code>comment</code>) such that 
  the message matches if any of text fields match. In case of plural 
  messages, <code>msgid</code> is considered matched if either 
  <code>msgid</code> or <code>msgid_plural</code> fields match, and 
  <code>msgstr</code> if any of the <code>msgstr</code> fields match.</p>
  <p>Every matching option has a counterpart with prepended 
  <code>n*</code>, by which the meaning of the match is inverted; for 
  example, if both <code>msgid:foo</code> and <code>nmsgid:bar</code> are 
  given, then the message matches if its <code>msgid</code> contains 
  <code>foo</code> but does not contain <code>bar</code>.</p>
  <p>When simple AND- or OR-matching is not enough, parameter 
  <code>fexpr</code> can be used to specify full logical expressions, using
  any of the basic matchers linked with AND, OR, NOT parameters, and 
  parenthesis. If a matcher needs a value (e.g. regular expressions), 
  within expression it is given as <code>MATCHER/VALUE/</code>, where 
  another nonalphanumeric character can be used instead of slash if the 
  value contains it. If matchers is influenced by another global parameter 
  (e.g. case sensitivity), in the expression it may be able to take 
  overriding modifiers as single characters after matcher name, i.e. 
  <code>MATCHER/VALUE/MODS</code> (or <code>MATCHER/MODS</code> for 
  parameterless matchers). Examples:</p>
<pre class="literalblock">
   # Either msgctxt or comment contain 'foo', and msgid contains 'bar'.
   fexpr:'(msgctxt/foo/ or comment/foo/) and msgid/bar/'

   # msgid contains 'quuk' in any casing and msgstr exactly 'Qaak'.
   fexpr:'msgid/quuk/ and msgstr/Qaak/c'
</pre>
  <p>Available modifiers to matchers are:</p>
  <ul>
    <li>
      <code>c</code>: text matching pattern is case-sensitive
    </li>
    <li>
      <code>i</code>: text matching pattern is case-insensitive
    </li>
  </ul>
  <p>Sieve parameters for replacement:</p>
  <ul>
    <li>
      <code>replace:&lt;string&gt;</code>: string to replace matched part 
      of translation
    </li>
  </ul>
  <p>The <code>replace</code> option must go together with the 
  <code>msgstr</code> match. As usual for regular expression replacement, 
  the replacement string may contain <code>\&lt;number&gt;</code> 
  references to groups defined by <code>msgstr</code> match.</p>
  <p>Other sieve parameters:</p>
  <ul>
    <li>
      <code>accel:&lt;chars&gt;</code>: strip these characters as 
      accelerator markers
    </li>
    <li>
      <code>case</code>: case-sensitive match (insensitive by default)
    </li>
    <li>
      <code>mark</code>: mark each matched message with a flag
    </li>
    <li>
      <code>filter:&lt;hookspec&gt;</code>: apply F1A filtering hook to 
      translation prior to matching (see <a 
      href="pology.misc.langdep-module.html#get_hook_lreq" 
      class="link">misc.langdep.get_hook_lreq</a> for the format of hook 
      specifications)
    </li>
    <li>
      <code>nowrap</code>: do not wrap long messages when writing them to 
      output
    </li>
    <li>
      <code>lokalize</code>: open catalogs at matched messages in Lokalize
    </li>
  </ul>
  <p>If accelerator character is not given by <code>accel</code> option, 
  the sieve will try to guess the accelerator; it may choose wrongly or 
  decide that there are no accelerators. E.g. an 
  <code>X-Accelerator-Marker</code> header field is checked for the 
  accelerator character.</p>
  <p>Using the <code>mark</code> option, <code>pattern-match</code> flag 
  will be added to each matched message, in the PO file itself; the 
  messages will not be sent to standard output. The modified files can then
  be opened in an editor, and messages looked up by this flag. This is for 
  cases when the search is performed in order to modify something in 
  matched messages, but doing so automatically using <code>replace</code> 
  option is not possible or safe enough. Option <code>-m</code> of 
  <code>posieve.py</code> is useful here to send the names of modified POs 
  to a separate file.</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Chusslove Illich (&#1063;&#1072;&#1089;&#1083;&#1072;&#1074; &#1048;&#1083;&#1080;&#1115;) &lt;caslav.ilic@gmx.net&gt;
      </p>
      <p><strong>License:</strong>
        GPLv3
      </p>
</div><!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Classes</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pology.sieve.find_messages.Sieve-class.html" class="summary-name">Sieve</a>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pology.sieve.find_messages.ExprError-class.html" class="summary-name">ExprError</a><br />
      Exception for errors in message matching expressions.
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="setup_sieve"></a><span class="summary-sig-name">setup_sieve</span>(<span class="summary-sig-arg">p</span>)</span></td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">(msgf, msg, cat, hl=[])-&gt;bool</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.sieve.find_messages-module.html#build_msg_matcher" class="summary-sig-name">build_msg_matcher</a>(<span class="summary-sig-arg">exprstr</span>,
        <span class="summary-sig-arg">mopts</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">abort</span>=<span class="summary-sig-default">False</span>)</span><br />
      Build expression matcher for messages.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">(msg, cat, hl=[])-&gt;bool</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.sieve.find_messages-module.html#build_msg_fmatcher" class="summary-sig-name">build_msg_fmatcher</a>(<span class="summary-sig-arg">exprstr</span>,
        <span class="summary-sig-arg">mopts</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">accels</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">filters</span>=<span class="summary-sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>,
        <span class="summary-sig-arg">abort</span>=<span class="summary-sig-default">False</span>)</span><br />
      Build expression matcher for messages, with filtering.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="build_msg_matcher"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">build_msg_matcher</span>(<span class="sig-arg">exprstr</span>,
        <span class="sig-arg">mopts</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">abort</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Build expression matcher for messages.</p>
  <p>For expression syntax, see this module documentation on 
  <code>fexpr</code> sieve parameter.</p>
  <p>The <code>mopts</code> parameter, if given, defines global matching 
  options. It can be either a dictionary or an object with data attributes,
  and can contain the following keys/attributes (in parenthesis: type and 
  default value in case the key is not present):</p>
  <ul>
    <li>
      <code>case</code> (<code>bool</code>, <code>False</code>): 
      <code>True</code> for case-sensitive matching
    </li>
  </ul>
  <p>The built matcher function takes up to four parameters, in order:</p>
  <ul>
    <li>
      <code>msgf</code>: filtered message (to really match against)
    </li>
    <li>
      <code>msg</code>: raw message (to properly report matched spans)
    </li>
    <li>
      <code>cat</code>: catalog in which the message resides
    </li>
    <li>
      <code>hl</code>: <a 
      href="pology.misc.msgreport-module.html#report_msg_content" 
      class="link">highlight specification</a> (to be filled with matched 
      spans, can be omitted from the call)
    </li>
  </ul>
  <p>Matcher function returns <code>True</code> if the message is matched, 
  <code>False</code> otherwise.</p>
  <p>In case an error in expression is encountered while building the 
  matcher, either <a href="pology.sieve.find_messages.ExprError-class.html"
  class="link">ExprError</a> exception may be thrown or execution aborted, 
  depending on the parameter <code>abort</code>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>exprstr</code></strong> (string) - expression string</li>
        <li><strong class="pname"><code>mopts</code></strong> (dict or attribute object) - global matching options</li>
        <li><strong class="pname"><code>abort</code></strong> (bool) - on errors in expression, abort execution if <code>True</code>, 
          raise <a href="pology.sieve.find_messages.ExprError-class.html" 
          class="link">ExprError</a> if <code>False</code></li>
    </ul></dd>
    <dt>Returns: (msgf, msg, cat, hl=[])-&gt;bool</dt>
        <dd>matcher function</dd>
  </dl>
</td></tr></table>
</div>
<a name="build_msg_fmatcher"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">build_msg_fmatcher</span>(<span class="sig-arg">exprstr</span>,
        <span class="sig-arg">mopts</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">accels</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">filters</span>=<span class="sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>,
        <span class="sig-arg">abort</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Build expression matcher for messages, with filtering.</p>
  <p>Like <a 
  href="pology.sieve.find_messages-module.html#build_msg_matcher" 
  class="link">build_msg_matcher</a>, except that matchers built by this 
  function do their own filtering, and so omit the first argument.</p>
  <p>For semantics of <code>accels</code> and <code>filters</code>, see 
  this module documentation on <code>accel</code> and <code>filter</code> 
  sieve parameters.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>exprstr</code></strong> (string) - expression string</li>
        <li><strong class="pname"><code>mopts</code></strong> (attribute object) - global matching options</li>
        <li><strong class="pname"><code>accels</code></strong> (sequence of strings or <code>None</code>) - possible accelerator markers</li>
        <li><strong class="pname"><code>filters</code></strong> ((text)-&gt;text) - filters to apply to text fields [F1A hooks]</li>
        <li><strong class="pname"><code>abort</code></strong> (bool) - on errors, abort execution if <code>True</code>, raise exception 
          if <code>False</code></li>
    </ul></dd>
    <dt>Returns: (msg, cat, hl=[])-&gt;bool</dt>
        <dd>matcher function</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
