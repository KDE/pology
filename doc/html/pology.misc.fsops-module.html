<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pology.misc.fsops</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pology-module.html">Package&nbsp;pology</a> ::
        <a href="pology.misc-module.html">Package&nbsp;misc</a> ::
        Module&nbsp;fsops
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module fsops</h1><p class="nomargin-top"></p>
<p>Operations with environment, file system and external commands.</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Chusslove Illich (&#1063;&#1072;&#1089;&#1083;&#1072;&#1074; &#1048;&#1083;&#1080;&#1115;) &lt;caslav.ilic@gmx.net&gt;
      </p>
      <p><strong>License:</strong>
        GPLv3
      </p>
</div><!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[string...]</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#collect_files" class="summary-sig-name">collect_files</a>(<span class="summary-sig-arg">paths</span>,
        <span class="summary-sig-arg">recurse</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">sort</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">unique</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">relcwd</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">selectf</span>=<span class="summary-sig-default">None</span>)</span><br />
      Collect list of files from given directory and file paths.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#collect_files_by_ext" class="summary-sig-name">collect_files_by_ext</a>(<span class="summary-sig-arg">paths</span>,
        <span class="summary-sig-arg">extension</span>,
        <span class="summary-sig-arg">recurse</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">sort</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">unique</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">relcwd</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">selectf</span>=<span class="summary-sig-default">None</span>)</span><br />
      Collect list of files having given extension from given paths.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#collect_catalogs" class="summary-sig-name">collect_catalogs</a>(<span class="summary-sig-arg">paths</span>,
        <span class="summary-sig-arg">recurse</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">sort</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">unique</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">relcwd</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">selectf</span>=<span class="summary-sig-default">None</span>)</span><br />
      Collect list of catalog file paths from given paths.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#collect_catalogs_by_env" class="summary-sig-name">collect_catalogs_by_env</a>(<span class="summary-sig-arg">catpathenv</span>,
        <span class="summary-sig-arg">recurse</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">sort</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">unique</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">relcwd</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">selectf</span>=<span class="summary-sig-default">None</span>)</span><br />
      Collect list of catalog file paths from directories given by an 
      environment variable.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#mkdirpath" class="summary-sig-name">mkdirpath</a>(<span class="summary-sig-arg">dirpath</span>)</span><br />
      Make all the directories in the path which do not exist yet.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">int</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#system_wd" class="summary-sig-name">system_wd</a>(<span class="summary-sig-arg">cmdline</span>,
        <span class="summary-sig-arg">wdir</span>)</span><br />
      Execute command line in a specific working directory.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#assert_system" class="summary-sig-name">assert_system</a>(<span class="summary-sig-arg">cmdline</span>,
        <span class="summary-sig-arg">echo</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">wdir</span>=<span class="summary-sig-default">None</span>)</span><br />
      Execute command line and assert success.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">(string, string, int)</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#collect_system" class="summary-sig-name">collect_system</a>(<span class="summary-sig-arg">cmdline</span>,
        <span class="summary-sig-arg">echo</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">wdir</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">env</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">instr</span>=<span class="summary-sig-default">None</span>)</span><br />
      Execute command line and collect stdout, stderr, and return code.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[string...]</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#lines_from_file" class="summary-sig-name">lines_from_file</a>(<span class="summary-sig-arg">filepath</span>,
        <span class="summary-sig-arg">encoding</span>=<span class="summary-sig-default">None</span>)</span><br />
      Read content of a text file into list of lines.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#join_ncwd" class="summary-sig-name">join_ncwd</a>(<span class="summary-sig-arg">*elements</span>)</span><br />
      Join path and normalize it with respect to current working directory.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">unicode string or list of objects</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#str_to_unicode" class="summary-sig-name">str_to_unicode</a>(<span class="summary-sig-arg">strarg</span>)</span><br />
      Convert a raw string value or sequence of values into Unicode.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">raw string or list of objects</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#unicode_to_str" class="summary-sig-name">unicode_to_str</a>(<span class="summary-sig-arg">strarg</span>)</span><br />
      Convert a unicode string into raw byte sequence.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[string...]</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#get_env_langs" class="summary-sig-name">get_env_langs</a>()</span><br />
      Guess user's preferred languages from the environment.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">int</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#term_width" class="summary-sig-name">term_width</a>(<span class="summary-sig-arg">stream</span>=<span class="summary-sig-default">sys.stdout</span>,
        <span class="summary-sig-arg">default</span>=<span class="summary-sig-default">None</span>)</span><br />
      Get number of columns in the terminal of output stream.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">(string)-&gt;bool</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#build_path_selector" class="summary-sig-name">build_path_selector</a>(<span class="summary-sig-arg">incnames</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">incpaths</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">excnames</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">excpaths</span>=<span class="summary-sig-default">None</span>)</span><br />
      Build a path selection function based on inclusion-exclusion 
      condition.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[string...]</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#collect_paths_from_file" class="summary-sig-name">collect_paths_from_file</a>(<span class="summary-sig-arg">fpath</span>,
        <span class="summary-sig-arg">cmnts</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">incexc</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">respathf</span>=<span class="summary-sig-default">None</span>)</span><br />
      Collect list of paths from the file.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">[string...]</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.fsops-module.html#collect_paths_cmdline" class="summary-sig-name">collect_paths_cmdline</a>(<span class="summary-sig-arg">rawpaths</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">incnames</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">incpaths</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">excnames</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">excpaths</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">filesfrom</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">cmnts</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">incexc</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">elsecwd</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">respathf</span>=<span class="summary-sig-default">None</span>)</span><br />
      Collect list of paths from usual sources given on command line.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="collect_files"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">collect_files</span>(<span class="sig-arg">paths</span>,
        <span class="sig-arg">recurse</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">sort</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">unique</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">relcwd</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">selectf</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Collect list of files from given directory and file paths.</p>
  <p><code>paths</code> can be any sequence of strings, or a single string.
  Directories can be searched for files recursively or non-resursively, as 
  requested by the <code>recurse</code> parameter. Parameters 
  <code>sort</code> and <code>unique</code> determine if the resulting 
  paths are sorted alphabetically increasing and if duplicate paths are 
  removed. If <code>relcwd</code> is set to <code>True</code>, absolute 
  file paths which point to files within the current working directory are 
  made relative to it.</p>
  <p>Only selected files may be collected by supplying a selection function
  through <code>selectf</code> parameter. It takes a file path as argument 
  and returns a boolean, <code>True</code> to select the file or 
  <code>False</code> to discard it.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>paths</code></strong> (string or iter(string*)) - paths to search for files</li>
        <li><strong class="pname"><code>recurse</code></strong> (bool) - whether to search for files recursively</li>
        <li><strong class="pname"><code>sort</code></strong> (bool) - whether to sort collected paths</li>
        <li><strong class="pname"><code>unique</code></strong> (bool) - whether to eliminate duplicate collected paths</li>
        <li><strong class="pname"><code>relcwd</code></strong> - whether to make collected absolute paths within current working 
          directory relative to it</li>
        <li><strong class="pname"><code>relcwd</code></strong> - bool</li>
        <li><strong class="pname"><code>selectf</code></strong> ((string)-&gt;bool) - test to select or discard a file path</li>
    </ul></dd>
    <dt>Returns: [string...]</dt>
        <dd>collected file paths</dd>
  </dl>
</td></tr></table>
</div>
<a name="collect_files_by_ext"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">collect_files_by_ext</span>(<span class="sig-arg">paths</span>,
        <span class="sig-arg">extension</span>,
        <span class="sig-arg">recurse</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">sort</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">unique</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">relcwd</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">selectf</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Collect list of files having given extension from given paths.</p>
  <p>The <code>extension</code> parameter can be a single extension or a 
  sequence of extensions, without the leading dot. Files with empty 
  extension (i.e. dot at the end of path) are collected by supplying empty 
  string for <code>extension</code>, and files with no extension by 
  supplying another empty sequence.</p>
  <p>Other parameters behave in the same way as in <a 
  href="pology.misc.fsops-module.html#collect_files" 
  class="link">collect_files</a>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>extension</code></strong> (string or sequence of strings) - extension of files to collect</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.misc.fsops-module.html#collect_files" 
        class="link">collect_files</a>
      </p>
</div></td></tr></table>
</div>
<a name="collect_catalogs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">collect_catalogs</span>(<span class="sig-arg">paths</span>,
        <span class="sig-arg">recurse</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">sort</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">unique</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">relcwd</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">selectf</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Collect list of catalog file paths from given paths.</p>
  <p>Applies <code>collect_files_by_ext</code> with extensions set to 
  <code>(&quot;po&quot;, &quot;pot&quot;)</code>.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="collect_catalogs_by_env"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">collect_catalogs_by_env</span>(<span class="sig-arg">catpathenv</span>,
        <span class="sig-arg">recurse</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">sort</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">unique</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">relcwd</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">selectf</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Collect list of catalog file paths from directories given by an 
  environment variable.</p>
  <p>Other parameters behave in the same way as in <a 
  href="pology.misc.fsops-module.html#collect_catalogs" 
  class="link">collect_catalogs</a>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>catpathenv</code></strong> (string) - environment variable name</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="mkdirpath"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">mkdirpath</span>(<span class="sig-arg">dirpath</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Make all the directories in the path which do not exist yet.</p>
  <p>Like shell's <code>mkdir -p</code>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dirpath</code></strong> (string) - the directory path to create</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="system_wd"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">system_wd</span>(<span class="sig-arg">cmdline</span>,
        <span class="sig-arg">wdir</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Execute command line in a specific working directory.</p>
  <p>Like <code>os.system</code>, only switching CWD during execution.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cmdline</code></strong> (string) - command line to execute</li>
        <li><strong class="pname"><code>wdir</code></strong> (path) - working directory for the command (CWD if none given)</li>
    </ul></dd>
    <dt>Returns: int</dt>
        <dd>exit code from the command</dd>
  </dl>
</td></tr></table>
</div>
<a name="assert_system"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">assert_system</span>(<span class="sig-arg">cmdline</span>,
        <span class="sig-arg">echo</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">wdir</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Execute command line and assert success.</p>
  <p>If the command exits with non-zero zero state, the program aborts.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cmdline</code></strong> (string) - command line to execute</li>
        <li><strong class="pname"><code>echo</code></strong> (bool) - whether to echo the supplied command line</li>
        <li><strong class="pname"><code>wdir</code></strong> (path) - working directory for the command (CWD if none given)</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="collect_system"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">collect_system</span>(<span class="sig-arg">cmdline</span>,
        <span class="sig-arg">echo</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">wdir</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">env</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">instr</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Execute command line and collect stdout, stderr, and return code.</p>
  <p>Normally the output will</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cmdline</code></strong> (string) - command line to execute</li>
        <li><strong class="pname"><code>echo</code></strong> (bool) - whether to echo the command line, as well as stdout/stderr</li>
        <li><strong class="pname"><code>wdir</code></strong> (path) - working directory for the command (CWD if none given)</li>
        <li><strong class="pname"><code>env</code></strong> ({string: string}) - environment for the execution (variable name-value pairs)</li>
        <li><strong class="pname"><code>instr</code></strong> (string) - string to pass to the command stdin</li>
    </ul></dd>
    <dt>Returns: (string, string, int)</dt>
        <dd>stdout, stderr, and exit code</dd>
  </dl>
</td></tr></table>
</div>
<a name="lines_from_file"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">lines_from_file</span>(<span class="sig-arg">filepath</span>,
        <span class="sig-arg">encoding</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Read content of a text file into list of lines.</p>
  <p>Only CR, LF, and CR+LF are treated as line breaks.</p>
  <p>If the given file path is not readable, or text cannot be decoded 
  using given encoding, exceptions are raised. If encoding is not given, 
  the encoding specified by the environment is used.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>filepath</code></strong> (string) - path of the file to read</li>
        <li><strong class="pname"><code>encoding</code></strong> - text encoding for the file</li>
        <li><strong class="pname"><code>encoding</code></strong> - string</li>
    </ul></dd>
    <dt>Returns: [string...]</dt>
        <dd>lines</dd>
  </dl>
</td></tr></table>
</div>
<a name="join_ncwd"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">join_ncwd</span>(<span class="sig-arg">*elements</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Join path and normalize it with respect to current working 
  directory.</p>
  <p>Path elements are joined with <code>os.path.join</code> and the joined
  path normalized by <code>os.path.normpath</code>. The normalized path is 
  then made relative to current working directory if it points to a 
  location within current working directory.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>elements</code></strong> (varlist) - path elements</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>normalized joined path</dd>
  </dl>
</td></tr></table>
</div>
<a name="str_to_unicode"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">str_to_unicode</span>(<span class="sig-arg">strarg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Convert a raw string value or sequence of values into Unicode.</p>
  <p>Strings comming in from the environment are frequently raw byte 
  sequences, and need to be converted into Unicode strings according to 
  system locale (e.g. command-line arguments). This function will take 
  either a single raw string or any sequence of raw strings and convert it 
  into a Unicode string or list thereof.</p>
  <p>If the input value is not a single raw or unicode string, it is 
  assumed to be a sequence of values. In case there are values in the input
  which are not raw strings, they will be carried over into the result 
  as-is.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>strarg</code></strong> (string, unicode, or sequence of objects) - input string or sequence</li>
    </ul></dd>
    <dt>Returns: unicode string or list of objects</dt>
        <dd>unicode string or sequence of objects</dd>
  </dl>
</td></tr></table>
</div>
<a name="unicode_to_str"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">unicode_to_str</span>(<span class="sig-arg">strarg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Convert a unicode string into raw byte sequence.</p>
  <p>Strings goint to the environment should frequently be raw byte 
  sequences, and need to be converted from Unicode strings according to 
  system locale (e.g. command-line arguments). This function will take 
  either a single Unicode string or any sequence of Unicode strings and 
  convert it into a raw string or list thereof.</p>
  <p>If the input value is not a single raw or unicode string, it is 
  assumed to be a sequence of values. In case there are values in the input
  which are not Unicode strings, they will be carried over into the result 
  as-is.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>strarg</code></strong> (string, unicode, or sequence of objects) - input string or sequence</li>
    </ul></dd>
    <dt>Returns: raw string or list of objects</dt>
        <dd>raw string or sequence of objects</dd>
  </dl>
</td></tr></table>
</div>
<a name="get_env_langs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_env_langs</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Guess user's preferred languages from the environment.</p>
  <p>Various environment variables are examined to collect the list of 
  languages in which the user may be wanting to read or write in in the 
  environment. The list is ordered from most to least preferred language, 
  and may be empty. Languages are given by their ISO-639 codes.</p>
  <dl class="fields">
    <dt>Returns: [string...]</dt>
        <dd>preferred languages</dd>
  </dl>
</td></tr></table>
</div>
<a name="term_width"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">term_width</span>(<span class="sig-arg">stream</span>=<span class="sig-default">sys.stdout</span>,
        <span class="sig-arg">default</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Get number of columns in the terminal of output stream.</p>
  <p>If the output stream is not linked to the terminal, 0 is returned. If 
  the output stream is linked to the terminal, but the number of columns 
  cannot be determined, the supplied default value is returned instead.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>stream</code></strong> (file) - output stream for which the terminal is looked up</li>
        <li><strong class="pname"><code>default</code></strong> (int) - value to return if width cannot be determined</li>
    </ul></dd>
    <dt>Returns: int</dt>
        <dd>width of the terminal in columns</dd>
  </dl>
</td></tr></table>
</div>
<a name="build_path_selector"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">build_path_selector</span>(<span class="sig-arg">incnames</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">incpaths</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">excnames</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">excpaths</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Build a path selection function based on inclusion-exclusion 
  condition.</p>
  <p>Frequently a collection of paths needs to be filtered, to pass only 
  specific paths (inclusion), or to block only specific paths (exclusion), 
  or both. Filtering conditions are normally posed on full paths, but 
  frequently file base names without extensions are really tested.</p>
  <p>This function builds a selector function which takes a path and 
  returns <code>True</code> to select the path or <code>False</code> to 
  discard it, based on four sets of conditions: inclusions by base name 
  without extension (<code>incnames</code>), inclusion by full path 
  (<code>incpaths</code>), exclusions by base name without extension 
  (<code>excnames</code>), and exclusions by full path 
  (<code>excpaths</code>). Each condition in each of the sets can be a 
  regular expression string, an object with <code>search(string)</code> 
  method returning true or false value (e.g. compiled regular expression), 
  or a general function taking string and returning true or false 
  value.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>incnames</code></strong> (sequence (see description)) - conditions for inclusion by base name without extension</li>
        <li><strong class="pname"><code>incpaths</code></strong> (sequence (see description)) - conditions for inclusion by full path</li>
        <li><strong class="pname"><code>excnames</code></strong> (sequence (see description)) - conditions for exclusion by base name without extension</li>
        <li><strong class="pname"><code>excpaths</code></strong> (sequence (see description)) - conditions for exclusion by full path</li>
    </ul></dd>
    <dt>Returns: (string)-&gt;bool</dt>
        <dd>path selection function</dd>
  </dl>
</td></tr></table>
</div>
<a name="collect_paths_from_file"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">collect_paths_from_file</span>(<span class="sig-arg">fpath</span>,
        <span class="sig-arg">cmnts</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">incexc</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">respathf</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Collect list of paths from the file.</p>
  <p>In general, non-empty lines in the file are taken to be paths, and 
  empty lines are skipped. If <code>cmnts</code> is <code>True</code>, then
  also the lines starting with <code>'#'</code> are skipped as 
  comments.</p>
  <p>If <code>incexc</code> is <code>True</code>, then the lines starting 
  with <code>':'</code> define directives by which files and directories 
  are included or excluded from the final list. Inclusion-exclusion 
  directives are mostly useful when some of the paths are directories, and 
  <code>respathf</code> parameter is used to provide a function to collect 
  subpaths from listed directories; the inclusion-exclusion directives are 
  applied to those subpaths too. The directives are as follows:</p>
  <ul>
    <li>
      <code>:-REGEX</code>: excludes path if its base name without 
      extension matches the regular expression
    </li>
    <li>
      <code>:/-REGEX</code>: excludes path if it matches the regular 
      expression
    </li>
    <li>
      <code>:+REGEX</code>: includes path only if its base name without 
      extension matches the regular expression
    </li>
    <li>
      <code>:/+REGEX</code>: includes path only if it matches the regular 
      expression
    </li>
  </ul>
  <p>Inclusion-exclusion directives are given to <a 
  href="pology.misc.fsops-module.html#build_path_selector" 
  class="link">build_path_selector</a> to create the path selection 
  function, and this function is used to filter collected paths (after 
  application of <code>respathf</code>, if given).</p>
  <p>The <code>respathf</code> parameter provides a function to be applied 
  to each path and return a list of paths, which then substitute the 
  original path. This function can be used, for example, to recursively 
  collect files from listed directories, or to exclude paths by an external
  condition.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>fpath</code></strong> (string) - the path to file which contains paths</li>
        <li><strong class="pname"><code>cmnts</code></strong> (bool) - whether the file can contain comments</li>
        <li><strong class="pname"><code>incexc</code></strong> (boolean) - whether the file can contain inclusion-exclusion directives</li>
        <li><strong class="pname"><code>respathf</code></strong> ((string)-&gt;[string...]) - function to resolve collected paths</li>
    </ul></dd>
    <dt>Returns: [string...]</dt>
        <dd>collected paths</dd>
  </dl>
</td></tr></table>
</div>
<a name="collect_paths_cmdline"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">collect_paths_cmdline</span>(<span class="sig-arg">rawpaths</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">incnames</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">incpaths</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">excnames</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">excpaths</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">filesfrom</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">cmnts</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">incexc</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">elsecwd</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">respathf</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Collect list of paths from usual sources given on command line.</p>
  <p>Scripts that process paths will in general get paths directly (as free
  command line arguments or on standard input), or indirectly from files 
  containing lists of paths (usually given by a command line option). 
  Sometimes input directory paths will be searched for paths of all files 
  in them, possibly of certain type. Especially when searching directory 
  paths, the script may take options to exclude or include only paths that 
  match something. This function conveniently wraps up these possibilities,
  to fetch all possible paths in single statement.</p>
  <p>The <code>rawpaths</code> parameter provides a list of directly 
  supplied paths, e.g. from command line arguments. <code>incnames</code>, 
  <code>incpaths</code>, <code>excnames</code>, and <code>excpaths</code> 
  are lists of inclusion and exclusion expressions, out of which single 
  path selection function is constructed, see <a 
  href="pology.misc.fsops-module.html#build_path_selector" 
  class="link">build_path_selector</a> for details. <code>filesfrom</code> 
  is a list of files containing lists of paths, and <code>cmnts</code> and 
  <code>incexc</code> are options for the file format, see <a 
  href="pology.misc.fsops-module.html#collect_paths_from_file" 
  class="link">collect_paths_from_file</a> for details. If both 
  <code>rawpaths</code> and <code>filesfrom</code> are not given or empty, 
  <code>elsecwd</code> determines if current working directory is added to 
  list of paths (<code>True</code>) or not (<code>False</code>). 
  <code>respathf</code> is a function which takes a path and returns list 
  of paths, see description of the same parameter in <a 
  href="pology.misc.fsops-module.html#collect_paths_from_file" 
  class="link">collect_paths_from_file</a>.</p>
  <p>The order of path collection is as follows. First all paths from 
  <code>rawpaths</code> are added, applying <code>respathf</code>. Then all
  paths from all files given by <code>fromfiles</code> are added, by 
  applying <a href="pology.misc.fsops-module.html#collect_paths_from_file" 
  class="link">collect_paths_from_file</a> on each file 
  (<code>respathf</code> is applied by sending it to <a 
  href="pology.misc.fsops-module.html#collect_paths_from_file" 
  class="link">collect_paths_from_file</a>). If both <code>rawpaths</code> 
  and <code>fromfiles</code> were <code>None</code> or empty, current 
  working directory is added, possibly applying <code>respathf</code>. 
  Finally, all paths are filtered through inclusion-exclusion tests; if no 
  inclusion tests are given, then all files are included unless excluded by
  an exclusion test.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>respathf</code></strong> ((string)-&gt;[string...]) - function to resolve collected paths</li>
    </ul></dd>
    <dt>Returns: [string...]</dt>
        <dd>collected paths</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
