<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pology.sieve.update_header</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pology-module.html">Package&nbsp;pology</a> ::
        <a href="pology.sieve-module.html">Package&nbsp;sieve</a> ::
        Module&nbsp;update_header
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module update_header</h1><p class="nomargin-top"></p>
<p>Initialize and update the PO header with own translation data.</p>
  <p>When work on a pristine PO starts, or an existing PO is to be revised 
  with new translations, this sieve can be used to automatically set PO 
  header fields to proper values. The revision date is taken as current, 
  while the rest of information is pulled from <a 
  href="pology.misc.config-module.html" class="link">Pology's 
  configuration</a>.</p>
  <p>Sieve options:</p>
  <ul>
    <li>
      <code>proj:&lt;project_id&gt;</code>: ID of the project
    </li>
    <li>
      <code>init</code>: treat the header as uninitialized
    </li>
    <li>
      <code>onmod</code>: update header only if the catalog was otherwise 
      modified (when the sieve is used in chain)
    </li>
  </ul>
  <p>Parameter <code>proj</code> specifies the ID of the project which 
  covers the POs about to be operated on. This ID is used as the name of 
  configuration section <code>[project-&lt;ID&gt;]</code>, which contains 
  the project data fields. Also used are the fields under the 
  <code>[user]</code> section, unless overriden in project's section. The 
  configuration fields used are:</p>
  <ul>
    <li>
      <code>[project-*]/name</code> or <code>[user]/name</code>: user's 
      name
    </li>
    <li>
      <code>[project-*]/email</code> or <code>[user]/email</code>: user's 
      email address
    </li>
    <li>
      <code>[project-*]/language</code>: language code (IS0 639)
    </li>
    <li>
      <code>[project-*]/language-team</code>: human-readable language name
    </li>
    <li>
      <code>[project-*]/team-email</code>: team's email
    </li>
    <li>
      <code>[project-*]/encoding</code>: encoding of PO files (UTF-8 
      assumed if not set)
    </li>
    <li>
      <code>[project-*]/plural-forms</code>: the PO plural header 
      (<code>nplurals=...; ...;</code>)
    </li>
    <li>
      <code>[project-*]/po-editor</code> or <code>[user]/po-editor</code>: 
      the tool used to work on PO files (none assumed if not set)
    </li>
  </ul>
  <p>Non-default header fields are not touched, except the revision date 
  and the last translator which are always updated (including the comment 
  line, where translators are listed with years of contributions). Option 
  <code>init</code> may be used to force setting all fields as if the 
  header were uninitialized, overwriting any previous content.</p>
  <p>An example of configuration appropriate for this sieve would be:</p>
<pre class="literalblock">
   [user]
   name = Chusslove Illich
   original-name = &#1063;&#1072;&#1089;&#1083;&#1072;&#1074; &#1048;&#1083;&#1080;&#1115;
   email = caslav.ilic@gmx.net
   po-editor = Kate

   [project-kde]
   language = sr
   language-team = Serbian
   team-email = kde-i18n-sr@kde.org
   plural-forms = nplurals=4; plural=n==1 ? 3 : n%%10==1 &amp;&amp; \
                  n%%100!=11 ? 0 : n%%10&gt;=2 &amp;&amp; n%%10&lt;=4 &amp;&amp; \
                  (n%%100&lt;10 || n%%100&gt;=20) ? 1 : 2;
</pre>
  <p>In <code>plural-forms</code> field, note escaped percent characters by
  doubling them (because single <code>%</code> in configuration has special
  meaning) and splitting into several lines by trailing <code>\</code> (for
  better look only).</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Chusslove Illich (&#1063;&#1072;&#1089;&#1083;&#1072;&#1074; &#1048;&#1083;&#1080;&#1115;) &lt;caslav.ilic@gmx.net&gt;
      </p>
      <p><strong>License:</strong>
        GPLv3
      </p>
</div><!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Classes</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pology.sieve.update_header.Sieve-class.html" class="summary-name">Sieve</a>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="setup_sieve"></a><span class="summary-sig-name">setup_sieve</span>(<span class="summary-sig-arg">p</span>)</span></td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.sieve.update_header-module.html#update_header" class="summary-sig-name">update_header</a>(<span class="summary-sig-arg">cat</span>,
        <span class="summary-sig-arg">project</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">title</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">copyright</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">license</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">name</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">email</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">teamemail</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">langname</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">langcode</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">encoding</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">ctenc</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">plforms</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">poeditor</span>=<span class="summary-sig-default">None</span>)</span><br />
      Update catalog header.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="update_header"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">update_header</span>(<span class="sig-arg">cat</span>,
        <span class="sig-arg">project</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">title</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">copyright</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">license</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">name</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">email</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">teamemail</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">langname</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">langcode</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">encoding</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">ctenc</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">plforms</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">poeditor</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Update catalog header.</p>
  <p>If a piece of information is not given (i.e. <code>None</code>), the 
  corresponding header field is left unmodified. If it is given as empty 
  string, the corresponding header field is removed. PO revision date is 
  updated always, to current date.</p>
  <p>Some fields (as noted in parameter descriptions) are expanded on 
  variables by applying the <a 
  href="pology.misc.resolve-module.html#expand_vars" 
  class="link">expand_vars</a> function. For example:</p>
<pre class="literalblock">
    title=&quot;Translation of %project into %langname.&quot;
</pre>
  <p>The following variables are available:</p>
  <ul>
    <li>
      <code>%basename</code>: PO file base name
    </li>
    <li>
      <code>%poname</code>: PO file base name without .po extension
    </li>
    <li>
      <code>%project</code>: value of <code>project</code> parameter (if 
      not <code>None</code>/empty)
    </li>
    <li>
      <code>%langname</code>: value of <code>langname</code> parameter (if 
      not <code>None</code>/empty)
    </li>
    <li>
      <code>%langcode</code>: value of <code>langcode</code> parameter (if 
      not <code>None</code>/empty)
    </li>
  </ul>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cat</code></strong> (<a href="pology.file.catalog.Catalog-class.html" 
          class="link">Catalog</a>) - catalog in which the header is to be updated</li>
        <li><strong class="pname"><code>project</code></strong> (string) - project name</li>
        <li><strong class="pname"><code>title</code></strong> (string) - translation title (expanded on variables)</li>
        <li><strong class="pname"><code>copyright</code></strong> (string) - copyright notice (expanded on variables)</li>
        <li><strong class="pname"><code>license</code></strong> (string) - license notice (expanded on variables)</li>
        <li><strong class="pname"><code>name</code></strong> (string) - translator's name</li>
        <li><strong class="pname"><code>email</code></strong> (string) - translator's email address</li>
        <li><strong class="pname"><code>teamemail</code></strong> (string) - language team's email address</li>
        <li><strong class="pname"><code>langname</code></strong> (string) - full language name</li>
        <li><strong class="pname"><code>langcode</code></strong> (string) - language code</li>
        <li><strong class="pname"><code>encoding</code></strong> (string) - text encoding</li>
        <li><strong class="pname"><code>ctenc</code></strong> (string) - content transfer encoding</li>
        <li><strong class="pname"><code>plforms</code></strong> (string) - plural forms expression</li>
        <li><strong class="pname"><code>poeditor</code></strong> (string) - translator's PO editor</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>reference to input header</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
