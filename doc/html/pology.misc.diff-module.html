<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pology.misc.diff</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pology-module.html">Package&nbsp;pology</a> ::
        <a href="pology.misc-module.html">Package&nbsp;misc</a> ::
        Module&nbsp;diff
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module diff</h1><p class="nomargin-top"></p>
<p>Producing diffs between texts.</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Chusslove Illich (&#1063;&#1072;&#1089;&#1083;&#1072;&#1074; &#1048;&#1083;&#1080;&#1115;) &lt;caslav.ilic@gmx.net&gt;
      </p>
      <p><strong>License:</strong>
        GPLv3
      </p>
</div><!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of tuples, float</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.diff-module.html#word_diff" class="summary-sig-name">word_diff</a>(<span class="summary-sig-arg">text_old</span>,
        <span class="summary-sig-arg">text_new</span>,
        <span class="summary-sig-arg">markup</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default">None</span>)</span><br />
      Create word-level difference between old and new text.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string, float</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.diff-module.html#word_ediff" class="summary-sig-name">word_ediff</a>(<span class="summary-sig-arg">text_old</span>,
        <span class="summary-sig-arg">text_new</span>,
        <span class="summary-sig-arg">markup</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default">None</span>)</span><br />
      Create word-level embedded difference between old and new texts.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.diff-module.html#ediff_to_old" class="summary-sig-name">ediff_to_old</a>(<span class="summary-sig-arg">dtext</span>)</span><br />
      Recover old version (-) from text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.diff-module.html#ediff_to_new" class="summary-sig-name">ediff_to_new</a>(<span class="summary-sig-arg">dtext</span>)</span><br />
      Recover new version (+) from text with embedded differences.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">list of index tuples</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pology.misc.diff-module.html#adapt_spans" class="summary-sig-name">adapt_spans</a>(<span class="summary-sig-arg">otext</span>,
        <span class="summary-sig-arg">ftext</span>,
        <span class="summary-sig-arg">spans</span>,
        <span class="summary-sig-arg">merge</span>=<span class="summary-sig-default">True</span>)</span><br />
      Adapt matched spans in filtered text to original text.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="word_diff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_diff</span>(<span class="sig-arg">text_old</span>,
        <span class="sig-arg">text_new</span>,
        <span class="sig-arg">markup</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">format</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level difference between old and new text.</p>
  <p>The difference is computed by looking at texts as collections of words
  and intersegments. Difference is presented as a list of tuples, with each
  tuple composed of a difference tag and a text segment. Difference tag is 
  string <code>&quot;+&quot;</code>, <code>&quot;-&quot;</code>, or 
  <code>&quot; &quot;</code>, for text segments which are new, old, or 
  present in both texts, respectively. The list is ordered such that 
  joining all text segments not marked as old will reconstruct the new 
  text, and joining all not marked as new will reconstruct the old text. 
  For example:</p>
<pre class="literalblock">
   &gt;&gt;&gt; s1 = &quot;A new type of foo.&quot;
   &gt;&gt;&gt; s2 = &quot;A new kind of bar.&quot;
   &gt;&gt;&gt; text_diff(s1, s2)
   []
</pre>
  <p>Differencing may take into account when the texts are expected to have
  XML-like markup, or when they are of certain format defined by 
  Gettext.</p>
  <p>Also reported is the <i>difference ratio</i>, a heuristic measure of 
  difference between two texts. 0.0 means no difference, and 1.0 that the 
  texts are completely different.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>text_old</code></strong> (string) - the old text</li>
        <li><strong class="pname"><code>text_new</code></strong> (string) - the new text</li>
        <li><strong class="pname"><code>markup</code></strong> (bool) - whether <code>&lt;...&gt;</code> markup can be expected in the 
          texts</li>
        <li><strong class="pname"><code>format</code></strong> (string) - Gettext format flag (e.g. <code>&quot;c-format&quot;</code>, 
          etc.)</li>
    </ul></dd>
    <dt>Returns: list of tuples, float</dt>
        <dd>difference list and difference ratio</dd>
  </dl>
</td></tr></table>
</div>
<a name="word_ediff"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">word_ediff</span>(<span class="sig-arg">text_old</span>,
        <span class="sig-arg">text_new</span>,
        <span class="sig-arg">markup</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">format</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create word-level embedded difference between old and new texts.</p>
  <p>Same as <a href="pology.misc.diff-module.html#word_diff" 
  class="link">word_diff</a>, but the difference is returned as text in 
  which the new segments are wrapped as <code>{+...+}</code>, and the old 
  segments as <code>{-...-}</code>.</p>
  <dl class="fields">
    <dt>Returns: string, float</dt>
        <dd>string with embedded differences and difference ratio</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.misc.diff-module.html#word_diff" 
        class="link">word_diff</a>
      </p>
</div></td></tr></table>
</div>
<a name="ediff_to_old"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ediff_to_old</span>(<span class="sig-arg">dtext</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover old version (-) from text with embedded differences.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dtext</code></strong> (string) - text with embedded differences</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>old version of the text</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.misc.diff-module.html#word_ediff" 
        class="link">word_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="ediff_to_new"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ediff_to_new</span>(<span class="sig-arg">dtext</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Recover new version (+) from text with embedded differences.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>dtext</code></strong> (string) - text with embedded differences</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>new version of the text</dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pology.misc.diff-module.html#word_ediff" 
        class="link">word_ediff</a>
      </p>
</div></td></tr></table>
</div>
<a name="adapt_spans"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">adapt_spans</span>(<span class="sig-arg">otext</span>,
        <span class="sig-arg">ftext</span>,
        <span class="sig-arg">spans</span>,
        <span class="sig-arg">merge</span>=<span class="sig-default">True</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Adapt matched spans in filtered text to original text.</p>
  <p>Sometimes text gets filtered before being matched, and when a match is
  found in the filtered text, it needs to be reported relative to the 
  original text. This function will heuristically adapt matched spans 
  relative to the filtered text back to the original text.</p>
  <p>Spans are given as list of index tuples <code>[(start1, end1), 
  ...]</code> where start and end index have standard Python semantics (may
  be negative too). If <code>merge</code> is <code>True</code>, any spans 
  that overlap or abut after adaptation will be merged into a single span, 
  ordered by increasing start index, and empty spans removed; otherwise 
  each adapted span will strictly correspond to the input span at that 
  position.</p>
  <p>Span tuples may have more elements past the start and end indices. 
  They will be ignored, but preserved; if merging is in effect, extra 
  elements will be preserved for only the frontmost of the overlapping 
  spans (undefined for which if there are several).</p>
  <p>If any of the input spans are invalid, the results are undefined.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>otext</code></strong> (string) - original text</li>
        <li><strong class="pname"><code>ftext</code></strong> (string) - filtered text</li>
        <li><strong class="pname"><code>spans</code></strong> (list of index tuples) - matched spans</li>
        <li><strong class="pname"><code>merge</code></strong> (bool) - whether to merge overlapping spans</li>
    </ul></dd>
    <dt>Returns: list of index tuples</dt>
        <dd>adapted spans</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pology-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
